[:arrow_left:Revenir √† la th√©orie.](../Theo/README.md)
<h1>Blade</h1>

- [1. Pr√©sentation](#1-pr√©sentation)
- [2. Les substitutions](#2-les-substitutions)
- [3. Les conditions](#3-les-conditions)
- [4. Les boucles](#4-les-boucles)
  - [4.1 foreach](#41-foreach)
  - [4.2 for](#42-for)
  - [4.3 forelse](#43-forelse)
  - [4.4 while](#44-while)
  - [4.5 La variable de boucle $loop](#45-la-variable-de-boucle-loop)
- [5. Les mod√®les / Mises en page](#5-les-mod√®les--mises-en-page)
- [x. Directive @PHP](#x-directive-php)


## 1. Pr√©sentation
Pour faire nos vues, on utilise du PHP et du HTML. Cependant, des personnes trouvent quue PHP est lourd. De l√† est n√© des moteurs de templates pour palier √† cela. Blade en fait partie.

Laravel poss√®de un moteur de Template: Blade.
Il a une syntaxe tr√®s particuli√®re qui permet de vous faire gagner du temps et de cr√©er aussi des mod√®les de document.

## 2. Les substitutions
Par exemple une vue en php
```php
<p>L'article n¬∞<?php $numero ?> se trouve dans l'all√©e <?php $allee ?></p>
```
Notre vue avec Blade
```html
<p>L'article n¬∞{{$numero}} se trouve dans l'all√©e {{$allee}}</p>
```
## 3. Les conditions
On utilise les directives @if, @else, @elseif et @endif.

Soit la route suivante:
```php
Route::get('/article', function () {
    $numero = 23;
    $allee = '6a';
    return view('article', ['numero' => $numero, 'allee' => $allee]);
});
```

La vue 'article.blade.php':
```html
<p>
    @if ($numero == 23)
        Le num√©ro 23 !? Excellent Article ! ‚ù§Ô∏è
    @elseif ($numero == 24)
        Notre second meilleur Article {{$numero}} ! Good Choice ! üòé
    @else
        Ce n'est pas notre meilleur article ({{$numero}}) mais il est cool quand m√™me. üòä
    @endif
</p>
<p>Vous pourrez le trouver dans l'all√©e {{$allee}}.</p>
```
## 4. Les boucles
Pour les exemples, nous utiliserons la route:
```php
Route::get('/vampire', function()
{
    $armes = array('pieu','ail','crucifix','soleil');
    $vide = array();
    return view('attack', ['armes' => $data],'vide'=>$vide);
});
```

### 4.1 foreach
Notre view 'attack.blade.php' sans utiliser Blade:
```php
<h1>Attaquons ces vampires ! </h1>
Pour attaquer ou √©loigner un vampire tu auras besoin:
<?php
foreach ($armes as $arme) {
    echo "- $arme<br/>";
}
?>
</ul>
```
Notre view 'attack.blade.php' avec Blade:
```php
<h1>Attaquons ces vampires ! </h1>
Pour attaquer ou √©loigner un vampire tu auras besoin:
@foreach ($armes as $arme)
    - {{$arme}}<br/>
@endforeach
```
On voit la facilit√© de lecture avec Blade. :)
### 4.2 for
```php
<h1>Attaquons ces vampires ! </h1>
<p>Pour attaquer ou √©loigner un vampire tu auras besoin:</p>
@for ($i=0;$i<count($armes);$i++)
    - {{$armes[$i] }}<br/>
@endfor
```
### 4.3 forelse
```php
<h1>Attaquons ces vampires ! </h1>
<p>Pour attaquer ou √©loigner un vampire tu auras besoin:</p>
@forelse ($armes as $arme)
    - {{$arme}}<br />
@empty
    Mince, je ne m'en rappelle plus ! Bonne chance ! üòÖ
@endforelse
```
### 4.4 while
```php
@while (true)
    <p>I'm looping forever.</p>
@endwhile
```

### 4.5 La variable de boucle $loop
Lors de boucles, on peut utiliser cette variable $loop et les propri√©t√©s suivantes:


|Propri√©t√©|Description|
|---|---|
|$loop->index|L'index de l'it√©ration courante (commence √† 0)|
|$loop->iteration|	L'it√©ration courante (commence √† 1).|
|$loop->remaining|	Nombre d'it√©rations restantes.|
|$loop->count|	Le nombre total d'√©l√©ments du tableau qui est en train d'√™tre parcouru.|
|$loop->first|	S'il s'agit de la premi√®re it√©ration dans la boucle.|
|$loop->last|	S'il s'agit de la derni√®re it√©ration dans la boucle.|
|$loop->even|	S'il s'agit d'une it√©ration paire dans la boucle.|
|$loop->odd|	S'il s'agit d'une it√©ration impaire dans la boucle.|
|$loop->depth|	The nesting level of the current loop.|
|$loop->parent|	Dans une boucle imbriqu√©e, la variable $loop de boucle du parent.|

Exemple 1
```php
@foreach ($users as $user)
    @if ($loop->first)
        Ceci est la premi√®re it√©ration
    @endif

    @if ($loop->last)
        Ceci est la derni√®re it√©ration
    @endif

    <p>C'est l'utilisateur ayant l'id {{ $user->id }}</p>
@endforeach
```
Exemple 2
```php
@foreach ($users as $user)
    @foreach ($user->posts as $post)
        @if ($loop->parent->first)
            Ceci est la premi√®re it√©ration de la boucle parente.
        @endif
    @endforeach
@endforeach
```

## 5. Les mod√®les / Mises en page
Alors on voit que l'on peut simplifier l'√©criture de certaines pages webs gr√¢ve √† Blade.

Mais on peut aussi faire des mod√®les de documents qui pourront √™tre utilis√©s par nos vues.

Nos vues fourniront les donn√©es n√©cessaires pour remplir le mod√®le.
Cr√©ons notre page mod√®le nomm√©e modele.blade.php
```php
<html>
    <body>
        <h1>@yield('titre')</h1>
        @section('contenu')
            <p>Contenu principal du mod√®le.</p>
        @show
    </body>
</html>
```
Et une page page.blade.php
```php
@extends('modele')
 
@section('titre')
    Mon titre
@stop
 
@section('contenu')
    @parent
    <p>Contenu de la page utilisant le mod√®le</p>
@stop
```
Ca donnera comme r√©sultat en HTML:
```html
<h1>Mon titre</h1>
<p>Contenu principal du mod√®le.</p>
<p>Contenu de la page utilisant le mod√®le</p>
```

Nous allons voir maintenant un Exemple complet
- La route:
```php
Route::get('/page{numero}', function ($numero) {
    return view("page$numero")->with('numero',$numero);
});
```
- modele avec JS et CSS Bootstrap: montemplate.balde.php
```php
<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <title>@yield('titre')</title>
</head>

<body>
    <div class='container'>
        <h1>@yield('titre1')</h1>
        @section('contenu')
        @show
    </div>
    <!-- jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
</body>
</html>
```
- Page.blade.php
```php
@extends('montemplate')
 
@section('titre')
    Super page {{$numero}}!
@stop

@section('h1')
    Je suis la page{{$numero}}
@stop

@section('contenu')
    @parent
    <p>Je suis le contenu de la page {{$numero}}. </p>
    @section('tutu')

    @show
@stop
```
- Page1.blade.php
```php
@extends('page')
@section('tutu')
    <h2>Lorem Ipsum</h2>
    <p>
        Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.
    </p>
@stop
```
- Page2.blade.php
```php
@extends('page')
@section('tutu')
    <h2>Les inondations</h2>
    <p>
        Les inondations qui touchent la Belgique est une terrible catastrophe.
    </p>
@stop
```



## x. Directive @PHP
Parfois il peut √™tre utile d'embarquer du code PHP dans vos vues. Vous pouvez utiliser la directive Blade @php et @endphp
Exemple
```php
@php
    $counter = 1;
@endphp
```


[:arrow_left:Revenir √† la th√©orie.](../Theo/README.md)

---
_[Eqla](http://www.eqla.be) 2021 - Formation Laravel_
