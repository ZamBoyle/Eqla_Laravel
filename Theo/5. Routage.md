[:arrow_left:Revenir à la théorie.](../Theo/README.md)
<h1>Le Routage dans Laravel</h1>

- [1. Une vue (view)](#1-une-vue-view)
- [2. Routage retournant une vue (view)](#2-routage-retournant-une-vue-view)
- [3. Routage retournant une string](#3-routage-retournant-une-string)
- [4. Routage avec POST](#4-routage-avec-post)
- [4. Routage retournant sur tableau json](#4-routage-retournant-sur-tableau-json)
- [5. Routage retournant une vue via un contrôleur](#5-routage-retournant-une-vue-via-un-contrôleur)

Dans l'arborescence de votre projet, vous pouvez voir qu'il y a un fichier qui s'appelle web.php dans le dossier routes.

Dans celui-ci on y décrit les différentes routes pour notre application.

## 1. Une vue (view)
Une route peut rediriger vers une vue mais ce n'est pas obligation.
Mais qu'est-ce qu'une vue ?
Il faut prendre cela comme on l'entend: une vue, c'est quelque chose que l'on voit. Et dans le monde du web ce que l'on voit c'est du HTML.
Une vue affichera donc du code HTML et d'autres gentilles choses que nous verrons au fil du temps. :) 
La définition de toutes nos vues se trouve dans le dossier: resources/views/
Par défaut, Laravel a une vue par défaut qui s'appelle 'welcome'.
On notera qu'elle se nomme welcome.blade.php
Le nom de fichier de nos vues auront donc cette syntaxe: nomdelavue.blade.php

## 2. Routage retournant une vue (view)
Si l'on analyse ce fichier, nous y voyons une route qui est définie:
```php
Route::get('/', function () {
    return view('welcome');
});
```
Ce code appelle la méthode get de la classe Route avec les paramètres suivants:
- Le premier paramètre est le chemin. Ici c'est la racine du site: /
- Le second paramètre est une [méthode anonyme](https://www.php.net/manual/fr/functions.anonymous.php) qui retourne une vue qui s'appelle 'welcome'.

Il ne faut pas mettre return view('welcome.blade.php');
Mettre le nom de la vue suffit: return view('welcome')

Ca veut dire:
>Hey Laravel, va dans le répertoire resources/views et prends la vue qui s'appelle welcome dont le nom de fichier est welcome.blade.php

Notons encore que la méthode get suppose que la requête a été initiée par la méthode GET sinon on a aussi une méthode post dans la classe Route.

Cette route pourrait s'écrire aussi:
```php
Route::view('/', 'welcome');
```
Ici, c'est un raccourci qui appellera la méthode view qui appellera la vue 'welcome' et retournera une route.
## 3. Routage retournant une string
```php
Route::get('/salutation', function () {
    return "Salut ! Bienvenue sur ce site !";
});
```
Dans cette route, on va rediriger l'utilisateur si l'on essaie de charger l'url /salutation. Il sera affiché dans le navigateur: Salut ! Bienvenue sur ce site !
## 4. Routage avec POST
On a vu pour le moment le routage avec la méthode GET. (via l'url)
Voyons maintenant avec la métode POST. Pour cela nous aurons besoin d'un formulaire.
```html
<form action="viapost" method="post">
    <input type="text" name="nom" />
    <input type="submit" name="Envoyer" />
</form>
```
Créons la route via la méthode POST:
```php
Route::post('viapost', function(){
    return "yo";
});
```

## 4. Routage retournant sur tableau json
## 5. Routage retournant une vue via un contrôleur
[:arrow_left:Revenir à la théorie.](../Theo/README.md)

---
_[Eqla](http://www.eqla.be) 2021 - Formation Laravel_